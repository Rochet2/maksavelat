(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{323:function(e,t,a){e.exports=a(498)},498:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(78),c=a.n(o),l=a(501),u=a(504),i=a(500),s=a(502),m=a(118),d=a(228),b=a(229),h=a(499),v=function(e){var t=e.to,a=e.linkProps,n=e.segmentProps,o=e.children;return r.a.createElement(h.a,Object.assign({to:t},a),r.a.createElement(m.a,Object.assign({padded:"very"},n),o))},f=function(){return r.a.createElement(d.a,{textAlign:"center",fluid:!0,style:{cursor:"pointer",height:"100%"}},r.a.createElement(m.a.Group,null,r.a.createElement(v,{to:"/AddDebt"},r.a.createElement(b.a,null,"Add debt")),r.a.createElement(v,{to:"/Debts"},r.a.createElement(b.a,null,"Debts")),r.a.createElement(v,{to:"/Contacts"},r.a.createElement(b.a,null,"Edit contacts")),r.a.createElement(v,{to:"/Reasons"},r.a.createElement(b.a,null,"Edit reasons"))))},p=a(21),E=a(32),g=a(245),w=a(149),y=a.n(w),O=a(136),j=(a(251),function(e){return{key:e,text:e,value:e}});var C=Object(E.b)(function(e){return{reasons:e.reasons,contacts:e.contacts,whiteTheme:e.whiteTheme}})(function(e){var t=e.reasons,a=e.contacts,o=e.whiteTheme,c=e.dispatch,l=Object(n.useState)(!0),u=Object(p.a)(l,2),i=u[0],s=u[1],d=Object(n.useState)(""),b=Object(p.a)(d,2),h=b[0],v=b[1],f=Object(n.useState)(""),E=Object(p.a)(f,2),w=E[0],C=E[1],k=Object(n.useState)(""),S=Object(p.a)(k,2),T=S[0],D=S[1],A=Object(n.useState)(""),R=Object(p.a)(A,2),x=R[0],q=R[1],B=Object(n.useState)(null),P=Object(p.a)(B,2),Y=P[0],I=P[1],M=Object(n.useState)(!1),N=Object(p.a)(M,2),F=N[0],G=N[1],H=Object(n.useState)(!1),W=Object(p.a)(H,2),J=W[0],U=W[1],z=Object(n.useState)(!1),L=Object(p.a)(z,2),$=L[0],K=L[1];return r.a.createElement("div",null,r.a.createElement(O.SemanticToastContainer,null),r.a.createElement(m.a,{inverted:o,basic:!0,style:{height:"100vh"}},r.a.createElement(g.a,{inverted:o,onSubmit:function(){var e=Number(w);e||(F=!0),h||(J=!0),T||($=!0),F||J||$?(Y&&clearTimeout(Y),I(setTimeout(function(){G(!1),U(!1),K(!1)},3e3)),G(F),U(J),K($)):(c({type:"AddDebt",value:{who:h,amount:i?-e:e,reason:T,comment:x,date:y()().format(),paid:!1}}),Y&&clearTimeout(Y),I(null),G(!1),U(!1),K(!1),v(""),C(""),D(""),q(""),Object(O.toast)({type:"success",icon:"save",title:"New debt created",time:3e3}))}},i?r.a.createElement(n.Fragment,null,r.a.createElement(g.a.Input,{required:!0,error:F,type:"number",step:"0.01",label:"You owe",placeholder:"Amount...",value:w,onChange:function(e,t){return C(t.value)}}),r.a.createElement(g.a.Select,{required:!0,error:J,label:"To",options:a.sort().map(j),placeholder:"Contact...",value:h,onChange:function(e,t){return v(t.value)}})):r.a.createElement(n.Fragment,null,r.a.createElement(g.a.Select,{required:!0,error:J,label:"Contact",options:a.sort().map(j),placeholder:"Contact...",value:h,onChange:function(e,t){return v(t.value)}}),r.a.createElement(g.a.Input,{required:!0,error:F,type:"number",step:"0.01",label:"Owes you",placeholder:"Amount...",value:w,onChange:function(e,t){return C(t.value)}})),r.a.createElement(g.a.Select,{required:!0,error:$,label:"For",options:t.sort().map(j),placeholder:"Reason...",value:T,onChange:function(e,t){return D(t.value)}}),r.a.createElement(g.a.Input,{label:"Comment (optional)",placeholder:"Comment...",value:x,onChange:function(e,t){return q(t.value)}}),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Button,{color:"blue",basic:!0,fluid:!0,onClick:function(e){e.preventDefault(),s(!i)}},"Toggle reciever"),r.a.createElement(g.a.Button,{color:"green",basic:!0,fluid:!0},"Add debt")))))}),k=a(246),S=a(247),T=a(132);var D=Object(E.b)(function(e){return{reasons:e.reasons,whiteTheme:e.whiteTheme}})(function(e){var t=e.whiteTheme,a=e.dispatch,o=e.reasons,c=Object(n.useState)(""),l=Object(p.a)(c,2),u=l[0],i=l[1];return r.a.createElement("div",null,r.a.createElement(m.a,{inverted:t,basic:!0,style:{height:"100vh"}},r.a.createElement(b.a,{size:"large"},"Reasons"),r.a.createElement(k.a,{action:{content:"Add reason",onClick:function(){a({type:"AddReason",value:u}),i("")}},placeholder:"Reason name....",onChange:function(e){return i(e.target.value)},value:u}),r.a.createElement(S.a,{inverted:t,divided:!0},o.map(function(e){return r.a.createElement(S.a.Item,{key:e},r.a.createElement(S.a.Content,{floated:"right"},r.a.createElement(T.a,{color:"red",content:"Remove",icon:"remove",onClick:function(){a({type:"RemoveReason",value:e})}})),r.a.createElement(S.a.Header,null,e))}))))}),A=a(503),R=a(168),x=a(80),q=a(269),B=function(e){var t={};return e.filter(function(e){return!e.paid}).forEach(function(e){t[e.who]=t[e.who]||{who:e.who,amount:0},t[e.who].amount+=e.amount}),Object.values(t).filter(function(e){return 0!==e.amount})};var P=Object(A.a)(Object(E.b)(function(e){return{debts:e.debts,whiteTheme:e.whiteTheme}})(function(e){var t=e.whiteTheme,a=e.debts,n=e.dispatch,o=e.history;return r.a.createElement(m.a,{inverted:t,basic:!0,style:{height:"100vh"}},r.a.createElement(m.a,null,r.a.createElement(b.a,{size:"large"},r.a.createElement(x.a,{name:"file outline"}),"Summary"),r.a.createElement(R.a.Group,{divided:!0,link:!0},Object(q.sortBy)(B(a),"who").map(function(e){return r.a.createElement(R.a,{key:e.who},r.a.createElement(R.a.Content,null,e.amount>0?r.a.createElement(R.a.Header,null,e.who," owes ",r.a.createElement("span",{style:{color:"green"}},e.amount,"\u20ac")," to you"):r.a.createElement(R.a.Header,null,"You owe ",r.a.createElement("span",{style:{color:"red"}},-e.amount,"\u20ac")," to ",e.who),r.a.createElement(R.a.Extra,null)),r.a.createElement(T.a,{color:"green",content:"Pay all",icon:"euro",onClick:function(){return n({type:"PayAll",value:e.who})}}))}))),r.a.createElement(m.a,null,r.a.createElement(b.a,{size:"large"},r.a.createElement(x.a,{name:"history"}),"History"),r.a.createElement(R.a.Group,{divided:!0},Object(q.sortBy)(a,["date","id"]).reverse().map(function(e){return r.a.createElement(R.a,{key:e.id},e.amount>0?r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,{style:{color:e.paid?"gray":"black"}},e.who," owes ",r.a.createElement("span",{style:{color:"green"}},e.amount,"\u20ac")," to you for ",e.reason),r.a.createElement(R.a.Meta,null,y()(e.date).local().format("DD-MM-YYYY")),e.comment&&r.a.createElement(R.a.Description,{style:{color:e.paid?"gray":"black"}},e.comment),r.a.createElement(R.a.Extra,null)):r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,{style:{color:e.paid?"gray":"black"}},"You owe ",r.a.createElement("span",{style:{color:"red"}},-e.amount,"\u20ac")," to ",e.who," for ",e.reason),r.a.createElement(R.a.Meta,null,y()(e.date).local().format("DD-MM-YYYY")),e.comment&&r.a.createElement(R.a.Description,{style:{color:e.paid?"gray":"black"}},e.comment),r.a.createElement(R.a.Extra,null)),r.a.createElement(T.a.Group,null,r.a.createElement(T.a,{color:"green",content:e.paid?"Undo payment":"Pay",icon:"euro",basic:e.paid,onClick:function(){return n({type:e.paid?"UnPayDebt":"PayDebt",value:e.id})}}),r.a.createElement(T.a,{color:"green",content:"Edit",icon:"edit",onClick:function(){return o.push("".concat(o.location.pathname,"/").concat(e.id))}})))}))))}));var Y=Object(E.b)(function(e){return{contacts:e.contacts,whiteTheme:e.whiteTheme}})(function(e){var t=e.whiteTheme,a=e.dispatch,o=e.contacts,c=Object(n.useState)(""),l=Object(p.a)(c,2),u=l[0],i=l[1];return r.a.createElement(m.a,{inverted:t,basic:!0,style:{height:"100vh"}},r.a.createElement(b.a,{size:"large"},"Contacts"),r.a.createElement(k.a,{action:{content:"Add contact",onClick:function(){a({type:"AddContact",value:u}),i("")}},placeholder:"Contact name...",onChange:function(e){return i(e.target.value)},value:u}),r.a.createElement(S.a,{inverted:t,divided:!0},o.sort().map(function(e){return r.a.createElement(S.a.Item,{key:e},r.a.createElement(S.a.Content,{floated:"right"},r.a.createElement(T.a,{color:"red",content:"Remove",icon:"remove",onClick:function(){a({type:"RemoveContact",value:e})}})),r.a.createElement(S.a.Header,null,e))})))}),I=function(e){return{key:e,text:e,value:e}};var M=Object(A.a)(Object(E.b)(function(e){return{reasons:e.reasons,contacts:e.contacts,whiteTheme:e.whiteTheme}})(function(e){var t=e.reasons,a=e.contacts,o=e.whiteTheme,c=e.dispatch,l=e.debt,u=e.history,i=Object(n.useState)(l.amount<0),s=Object(p.a)(i,2),d=s[0],b=s[1],h=Object(n.useState)(l.who),v=Object(p.a)(h,2),f=v[0],E=v[1],w=Object(n.useState)(Math.abs(l.amount)),y=Object(p.a)(w,2),j=y[0],C=y[1],k=Object(n.useState)(l.reason),S=Object(p.a)(k,2),T=S[0],D=S[1],A=Object(n.useState)(l.comment),R=Object(p.a)(A,2),x=R[0],q=R[1],B=Object(n.useState)(null),P=Object(p.a)(B,2),Y=P[0],M=P[1],N=Object(n.useState)(!1),F=Object(p.a)(N,2),G=F[0],H=F[1],W=Object(n.useState)(!1),J=Object(p.a)(W,2),U=J[0],z=J[1],L=Object(n.useState)(!1),$=Object(p.a)(L,2),K=$[0],Q=$[1];return r.a.createElement("div",null,r.a.createElement(O.SemanticToastContainer,null),r.a.createElement(m.a,{inverted:o,basic:!0,style:{height:"100vh"}},r.a.createElement(g.a,{inverted:o,onSubmit:function(){var e=Number(j);e||(G=!0),f||(U=!0),T||(K=!0),G||U||K?(Y&&clearTimeout(Y),M(setTimeout(function(){H(!1),z(!1),Q(!1)},3e3)),H(G),z(U),Q(K)):(c({type:"EditDebt",value:{id:l.id,who:f,amount:d?-e:e,reason:T,comment:x}}),Y&&clearTimeout(Y),M(null),H(!1),z(!1),Q(!1),Object(O.toast)({type:"success",icon:"save",title:"Saved",time:3e3}))}},d?r.a.createElement(n.Fragment,null,r.a.createElement(g.a.Input,{required:!0,error:G,type:"number",step:"0.01",label:"You owe",placeholder:"Amount...",value:j,onChange:function(e,t){return C(t.value)}}),r.a.createElement(g.a.Select,{required:!0,error:U,label:"To",options:a.sort().map(I),placeholder:"Contact...",value:f,onChange:function(e,t){return E(t.value)}})):r.a.createElement(n.Fragment,null,r.a.createElement(g.a.Select,{required:!0,error:U,label:"Contact",options:a.sort().map(I),placeholder:"Contact...",value:f,onChange:function(e,t){return E(t.value)}}),r.a.createElement(g.a.Input,{required:!0,error:G,type:"number",step:"0.01",label:"Owes you",placeholder:"Amount...",value:j,onChange:function(e,t){return C(t.value)}})),r.a.createElement(g.a.Select,{required:!0,error:K,label:"For",options:t.sort().map(I),placeholder:"Reason...",value:T,onChange:function(e,t){return D(t.value)}}),r.a.createElement(g.a.Input,{label:"Comment (optional)",placeholder:"Comment...",value:x,onChange:function(e,t){return q(t.value)}}),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Button,{color:"blue",basic:!0,fluid:!0,onClick:function(e){e.preventDefault(),b(!d)}},"Toggle reciever"),r.a.createElement(g.a.Field,null,r.a.createElement(g.a.Button,{color:"green",fluid:!0},"Save debt"))),r.a.createElement(g.a.Group,{widths:"equal"},r.a.createElement(g.a.Button,{color:"orange",basic:!0,fluid:!0,onClick:function(e){e.preventDefault(),Y&&clearTimeout(Y),b(l.amount<0),E(l.who),C(Math.abs(l.amount)),D(l.reason),q(l.comment),M(null),H(!1),z(!1),Q(!1),Object(O.toast)({type:"success",icon:"erase",title:"Form reset",time:3e3})}},"Reset form"),r.a.createElement(g.a.Button,{color:"red",basic:!0,fluid:!0,onClick:function(e){e.preventDefault(),c({type:"DeleteDebt",value:l.id}),u.goBack()}},"Delete debt")))))}));var N=Object(E.b)(function(e){return{debts:e.debts}})(function(e){var t=e.match,a=e.debts,n=t.params.id,o=a.find(function(e){return e.id==n});return o?r.a.createElement(M,{debt:o}):r.a.createElement("p",null,"unknown debtid ",n)});var F=function(){return r.a.createElement(l.a,{basename:"/maksavelat"},r.a.createElement(u.a,null,r.a.createElement(i.a,{exact:!0,path:"/",component:f}),r.a.createElement(i.a,{exact:!0,path:"/AddDebt",component:C}),r.a.createElement(i.a,{exact:!0,path:"/Debts",component:P}),r.a.createElement(i.a,{exact:!0,path:"/Debts/:id",component:N}),r.a.createElement(i.a,{exact:!0,path:"/Reasons",component:D}),r.a.createElement(i.a,{exact:!0,path:"/Contacts",component:Y}),r.a.createElement(i.a,{component:function(){return r.a.createElement(s.a,{to:"/"})}})))},G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var W=a(256),J=a(318),U={reasons:["Movies","Badminton","Other"],contacts:[],debts:[],whiteTheme:!1},z=function(e,t){var a=e||JSON.parse(window.localStorage.getItem("maksavelat"))||U,n=JSON.parse(JSON.stringify(a));switch(n.debts.forEach(function(e){e.id||(e.id=n.debts.filter(function(e){return e.id}).reduce(function(e,t){return Math.max(t.id,e)},0)+1)}),t.type){case"ToggleTheme":n.whiteTheme=!n.whiteTheme;break;case"AddReason":0===t.value.length||n.reasons.some(function(e){return e===t.value})||n.reasons.push(t.value);break;case"RemoveReason":n.reasons=n.reasons.filter(function(e){return e!==t.value});break;case"AddContact":0===t.value.length||n.contacts.some(function(e){return e===t.value})||n.contacts.push(t.value);break;case"RemoveContact":n.contacts=n.contacts.filter(function(e){return e!==t.value});break;case"AddDebt":t.value.id=n.debts.reduce(function(e,t){return Math.max(t.id,e)},0)+1,n.debts.push(t.value);break;case"PayDebt":n.debts.filter(function(e){return e.id===t.value}).forEach(function(e){e.paid=!0});break;case"UnPayDebt":n.debts.filter(function(e){return e.id===t.value}).forEach(function(e){e.paid=!1});break;case"PayAll":n.debts.filter(function(e){return e.who===t.value}).forEach(function(e){e.paid=!0});break;case"DeleteDebt":n.debts=n.debts.filter(function(e){return e.id!==t.value});break;case"EditDebt":n.debts.forEach(function(e,a){e.id===t.value.id&&(n.debts[a]=Object(J.a)({},e,t.value))})}return window.localStorage.setItem("maksavelat",JSON.stringify(n)),console.log(n,t),n},L=Object(W.b)(z),$=function(){c.a.render(r.a.createElement(E.a,{store:L},r.a.createElement(F,null)),document.getElementById("root"))};L.subscribe($),$(),function(e){if("serviceWorker"in navigator){if(new URL("/maksavelat",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/maksavelat","/service-worker.js");G?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):H(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):H(t,e)})}}()}},[[323,2,1]]]);
//# sourceMappingURL=main.1bf4ad6b.chunk.js.map