(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{324:function(e,t,a){e.exports=a(501)},498:function(e,t,a){},501:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(68),c=a.n(r),l=a(504),i=a(507),u=a(503),s=a(505),m=a(193),d=a(216),b=a(217),h=a(502),f=function(e){var t=e.to,a=e.linkProps,n=e.segmentProps,r=e.children;return o.a.createElement(h.a,Object.assign({to:t},a),o.a.createElement(m.a,Object.assign({padded:"very"},n),r))},p=function(){return o.a.createElement(d.a,{textAlign:"center",fluid:!0,style:{cursor:"pointer",height:"100%"}},o.a.createElement(m.a.Group,null,o.a.createElement(f,{to:"/AddDebt"},o.a.createElement(b.a,null,"Add debt")),o.a.createElement(f,{to:"/Debts"},o.a.createElement(b.a,null,"Debts")),o.a.createElement(f,{to:"/Contacts"},o.a.createElement(b.a,null,"Edit contacts")),o.a.createElement(f,{to:"/Reasons"},o.a.createElement(b.a,null,"Edit reasons"))))},v=a(21),E=a(41),g=a(178),w=a(125),y=a.n(w),O=a(95),j=(a(237),a(498),function(e){return{key:e,text:e,value:e}});var C=Object(E.b)(function(e){return{reasons:e.reasons,contacts:e.contacts,whiteTheme:e.whiteTheme}})(function(e){var t=e.reasons,a=e.contacts,r=e.whiteTheme,c=e.dispatch,l=Object(n.useState)(!0),i=Object(v.a)(l,2),u=i[0],s=i[1],d=Object(n.useState)(""),b=Object(v.a)(d,2),h=b[0],f=b[1],p=Object(n.useState)(""),E=Object(v.a)(p,2),w=E[0],C=E[1],k=Object(n.useState)(""),S=Object(v.a)(k,2),D=S[0],T=S[1],A=Object(n.useState)(""),R=Object(v.a)(A,2),z=R[0],x=R[1],q=Object(n.useState)(null),B=Object(v.a)(q,2),P=B[0],Y=B[1],I=Object(n.useState)(!1),M=Object(v.a)(I,2),N=M[0],F=M[1],G=Object(n.useState)(!1),H=Object(v.a)(G,2),W=H[0],J=H[1],U=Object(n.useState)(!1),L=Object(v.a)(U,2),$=L[0],K=L[1];return o.a.createElement("div",null,o.a.createElement(O.SemanticToastContainer,null),o.a.createElement(m.a,{inverted:r,basic:!0,style:{height:"100vh"}},o.a.createElement(g.a,{inverted:r,onSubmit:function(){var e=Number(w);e||(N=!0),h||(W=!0),D||($=!0),N||W||$?(P&&clearTimeout(P),Y(setTimeout(function(){F(!1),J(!1),K(!1)},3e3)),F(N),J(W),K($)):(c({type:"AddDebt",value:{who:h,amount:u?-e:e,reason:D,comment:z,date:y()().format(),paid:!1}}),P&&clearTimeout(P),Y(null),F(!1),J(!1),K(!1),f(""),C(""),T(""),x(""),Object(O.toast)({type:"success",icon:"save",title:"New debt created",time:3e3}))}},u?o.a.createElement(n.Fragment,null,o.a.createElement(g.a.Input,{size:"big",required:!0,error:N,type:"number",step:"0.01",label:"You owe",placeholder:"Amount...",value:w,onChange:function(e,t){return C(t.value)}}),o.a.createElement(g.a.Dropdown,{selection:!0,required:!0,error:W,label:"To",options:a.sort().map(j),placeholder:"Contact...",value:h,onChange:function(e,t){return f(t.value)}})):o.a.createElement(n.Fragment,null,o.a.createElement(g.a.Dropdown,{selection:!0,required:!0,error:W,label:"Contact",options:a.sort().map(j),placeholder:"Contact...",value:h,onChange:function(e,t){return f(t.value)}}),o.a.createElement(g.a.Input,{size:"big",required:!0,error:N,type:"number",step:"0.01",label:"Owes you",placeholder:"Amount...",value:w,onChange:function(e,t){return C(t.value)}})),o.a.createElement(g.a.Dropdown,{selection:!0,required:!0,error:$,label:"For",options:t.sort().map(j),placeholder:"Reason...",value:D,onChange:function(e,t){return T(t.value)}}),o.a.createElement(g.a.Input,{size:"big",label:"Comment (optional)",placeholder:"Comment...",value:z,onChange:function(e,t){return x(t.value)}}),o.a.createElement(g.a.Group,{widths:"equal"},o.a.createElement(g.a.Button,{size:"big",color:"blue",basic:!0,fluid:!0,onClick:function(e){e.preventDefault(),s(!u)}},"Toggle reciever"),o.a.createElement(g.a.Button,{size:"big",color:"green",basic:!0,fluid:!0},"Add debt")))))}),k=a(179),S=a(180),D=a(181),T=a(187);var A=Object(E.b)(function(e){return{reasons:e.reasons,whiteTheme:e.whiteTheme}})(function(e){var t=e.whiteTheme,a=e.dispatch,r=e.reasons,c=Object(n.useState)(""),l=Object(v.a)(c,2),i=l[0],u=l[1];return o.a.createElement("div",null,o.a.createElement(m.a,{inverted:t,basic:!0,style:{height:"100vh"}},o.a.createElement(b.a,{size:"large"},"Reasons"),o.a.createElement(k.a,{fluid:!0,size:"big",action:{content:"Add reason",onClick:function(){a({type:"AddReason",value:i}),u("")}},placeholder:"Reason name...",onChange:function(e){return u(e.target.value)},value:i}),o.a.createElement(S.a,null),o.a.createElement(D.a,{inverted:t,divided:!0},r.map(function(e){return o.a.createElement(D.a.Item,{key:e},o.a.createElement(D.a.Content,{floated:"right"},o.a.createElement(T.a,{color:"red",content:"Remove",icon:"remove",onClick:function(){a({type:"RemoveReason",value:e})}})),o.a.createElement(D.a.Header,null,e))}))))}),R=a(506),z=a(161),x=a(74),q=a(250),B=function(e){var t={};return e.filter(function(e){return!e.paid}).forEach(function(e){t[e.who]=t[e.who]||{who:e.who,amount:0},t[e.who].amount+=e.amount}),Object.values(t).filter(function(e){return 0!==e.amount})};var P=Object(R.a)(Object(E.b)(function(e){return{debts:e.debts,whiteTheme:e.whiteTheme}})(function(e){var t=e.whiteTheme,a=e.debts,n=e.dispatch,r=e.history;return o.a.createElement(m.a,{inverted:t,basic:!0,style:{height:"100vh"}},o.a.createElement(m.a,null,o.a.createElement(b.a,{size:"large"},o.a.createElement(x.a,{name:"file outline"}),"Summary"),o.a.createElement(z.a.Group,{divided:!0,link:!0},Object(q.sortBy)(B(a),"who").map(function(e){return o.a.createElement(z.a,{key:e.who},o.a.createElement(z.a.Content,null,e.amount>0?o.a.createElement(z.a.Header,null,e.who," owes ",o.a.createElement("span",{style:{color:"green"}},e.amount,"\u20ac")," to you"):o.a.createElement(z.a.Header,null,"You owe ",o.a.createElement("span",{style:{color:"red"}},-e.amount,"\u20ac")," to ",e.who),o.a.createElement(z.a.Extra,null)),o.a.createElement(T.a,{color:"green",content:"Pay all",icon:"euro",onClick:function(){return n({type:"PayAll",value:e.who})}}))}))),o.a.createElement(m.a,null,o.a.createElement(b.a,{size:"large"},o.a.createElement(x.a,{name:"history"}),"History"),o.a.createElement(z.a.Group,{divided:!0},Object(q.sortBy)(a,["date","id"]).reverse().map(function(e){return o.a.createElement(z.a,{key:e.id},e.amount>0?o.a.createElement(z.a.Content,null,o.a.createElement(z.a.Header,{style:{color:e.paid?"gray":"black"}},e.who," owes ",o.a.createElement("span",{style:{color:"green"}},e.amount,"\u20ac")," to you for ",e.reason),o.a.createElement(z.a.Meta,null,y()(e.date).local().format("DD-MM-YYYY")),e.comment&&o.a.createElement(z.a.Description,{style:{color:e.paid?"gray":"black"}},e.comment),o.a.createElement(z.a.Extra,null)):o.a.createElement(z.a.Content,null,o.a.createElement(z.a.Header,{style:{color:e.paid?"gray":"black"}},"You owe ",o.a.createElement("span",{style:{color:"red"}},-e.amount,"\u20ac")," to ",e.who," for ",e.reason),o.a.createElement(z.a.Meta,null,y()(e.date).local().format("DD-MM-YYYY")),e.comment&&o.a.createElement(z.a.Description,{style:{color:e.paid?"gray":"black"}},e.comment),o.a.createElement(z.a.Extra,null)),o.a.createElement(T.a.Group,null,o.a.createElement(T.a,{color:"green",content:"Edit",icon:"edit",onClick:function(){return r.push("".concat(r.location.pathname,"/").concat(e.id))}}),o.a.createElement(T.a,{color:"green",content:e.paid?"Undo payment":"Pay",icon:"euro",basic:e.paid,onClick:function(){return n({type:e.paid?"UnPayDebt":"PayDebt",value:e.id})}})))}))))}));var Y=Object(E.b)(function(e){return{contacts:e.contacts,whiteTheme:e.whiteTheme}})(function(e){var t=e.whiteTheme,a=e.dispatch,r=e.contacts,c=Object(n.useState)(""),l=Object(v.a)(c,2),i=l[0],u=l[1];return o.a.createElement(m.a,{inverted:t,basic:!0,style:{height:"100vh"}},o.a.createElement(b.a,{size:"large"},"Contacts"),o.a.createElement(k.a,{fluid:!0,size:"big",action:{content:"Add contact",onClick:function(){a({type:"AddContact",value:i}),u("")}},placeholder:"Contact name...",onChange:function(e){return u(e.target.value)},value:i}),o.a.createElement(S.a,null),o.a.createElement(D.a,{inverted:t,divided:!0},r.sort().map(function(e){return o.a.createElement(D.a.Item,{key:e},o.a.createElement(D.a.Content,{floated:"right"},o.a.createElement(T.a,{color:"red",content:"Remove",icon:"remove",onClick:function(){a({type:"RemoveContact",value:e})}})),o.a.createElement(D.a.Header,null,e))})))}),I=function(e){return{key:e,text:e,value:e}};var M=Object(R.a)(Object(E.b)(function(e){return{reasons:e.reasons,contacts:e.contacts,whiteTheme:e.whiteTheme}})(function(e){var t=e.reasons,a=e.contacts,r=e.whiteTheme,c=e.dispatch,l=e.debt,i=e.history,u=Object(n.useState)(l.amount<0),s=Object(v.a)(u,2),d=s[0],b=s[1],h=Object(n.useState)(l.who),f=Object(v.a)(h,2),p=f[0],E=f[1],w=Object(n.useState)(Math.abs(l.amount)),y=Object(v.a)(w,2),j=y[0],C=y[1],k=Object(n.useState)(l.reason),S=Object(v.a)(k,2),D=S[0],T=S[1],A=Object(n.useState)(l.comment),R=Object(v.a)(A,2),z=R[0],x=R[1],q=Object(n.useState)(null),B=Object(v.a)(q,2),P=B[0],Y=B[1],M=Object(n.useState)(!1),N=Object(v.a)(M,2),F=N[0],G=N[1],H=Object(n.useState)(!1),W=Object(v.a)(H,2),J=W[0],U=W[1],L=Object(n.useState)(!1),$=Object(v.a)(L,2),K=$[0],Q=$[1];return o.a.createElement("div",null,o.a.createElement(O.SemanticToastContainer,null),o.a.createElement(m.a,{inverted:r,basic:!0,style:{height:"100vh"}},o.a.createElement(g.a,{inverted:r,onSubmit:function(){var e=Number(j);e||(F=!0),p||(J=!0),D||(K=!0),F||J||K?(P&&clearTimeout(P),Y(setTimeout(function(){G(!1),U(!1),Q(!1)},3e3)),G(F),U(J),Q(K)):(c({type:"EditDebt",value:{id:l.id,who:p,amount:d?-e:e,reason:D,comment:z}}),P&&clearTimeout(P),Y(null),G(!1),U(!1),Q(!1),Object(O.toast)({type:"success",icon:"save",title:"Saved",time:3e3}))}},d?o.a.createElement(n.Fragment,null,o.a.createElement(g.a.Input,{size:"big",required:!0,error:F,type:"number",step:"0.01",label:"You owe",placeholder:"Amount...",value:j,onChange:function(e,t){return C(t.value)}}),o.a.createElement(g.a.Dropdown,{scrolling:!0,selection:!0,required:!0,error:J,label:"To",options:a.sort().map(I),placeholder:"Contact...",value:p,onChange:function(e,t){return E(t.value)}})):o.a.createElement(n.Fragment,null,o.a.createElement(g.a.Dropdown,{scrolling:!0,selection:!0,required:!0,error:J,label:"Contact",options:a.sort().map(I),placeholder:"Contact...",value:p,onChange:function(e,t){return E(t.value)}}),o.a.createElement(g.a.Input,{size:"big",required:!0,error:F,type:"number",step:"0.01",label:"Owes you",placeholder:"Amount...",value:j,onChange:function(e,t){return C(t.value)}})),o.a.createElement(g.a.Dropdown,{scrolling:!0,selection:!0,required:!0,error:K,label:"For",options:t.sort().map(I),placeholder:"Reason...",value:D,onChange:function(e,t){return T(t.value)}}),o.a.createElement(g.a.Input,{size:"big",label:"Comment (optional)",placeholder:"Comment...",value:z,onChange:function(e,t){return x(t.value)}}),o.a.createElement(g.a.Group,{widths:"equal"},o.a.createElement(g.a.Button,{size:"big",color:"blue",basic:!0,fluid:!0,onClick:function(e){e.preventDefault(),b(!d)}},"Toggle reciever"),o.a.createElement(g.a.Field,null,o.a.createElement(g.a.Button,{size:"big",color:"green",fluid:!0},"Save debt"))),o.a.createElement(g.a.Group,{widths:"equal"},o.a.createElement(g.a.Button,{size:"big",color:"orange",basic:!0,fluid:!0,onClick:function(e){e.preventDefault(),P&&clearTimeout(P),b(l.amount<0),E(l.who),C(Math.abs(l.amount)),T(l.reason),x(l.comment),Y(null),G(!1),U(!1),Q(!1),Object(O.toast)({type:"success",icon:"erase",title:"Form reset",time:3e3})}},"Reset form"),o.a.createElement(g.a.Button,{size:"big",color:"red",basic:!0,fluid:!0,onClick:function(e){e.preventDefault(),c({type:"DeleteDebt",value:l.id}),i.goBack()}},"Delete debt")))))}));var N=Object(E.b)(function(e){return{debts:e.debts}})(function(e){var t=e.match,a=e.debts,n=t.params.id,r=a.find(function(e){return e.id==n});return r?o.a.createElement(M,{debt:r}):o.a.createElement("p",null,"unknown debtid ",n)});var F=function(){return o.a.createElement(l.a,{basename:""},o.a.createElement(i.a,null,o.a.createElement(u.a,{exact:!0,path:"/",component:p}),o.a.createElement(u.a,{exact:!0,path:"/AddDebt",component:C}),o.a.createElement(u.a,{exact:!0,path:"/Debts",component:P}),o.a.createElement(u.a,{exact:!0,path:"/Debts/:id",component:N}),o.a.createElement(u.a,{exact:!0,path:"/Reasons",component:A}),o.a.createElement(u.a,{exact:!0,path:"/Contacts",component:Y}),o.a.createElement(u.a,{component:function(){return o.a.createElement(s.a,{to:"/"})}})))},G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var W=a(229),J=a(319),U={reasons:["Movies","Badminton","Other"],contacts:[],debts:[],whiteTheme:!1},L=function(e,t){var a=e||JSON.parse(window.localStorage.getItem("maksavelat"))||U,n=JSON.parse(JSON.stringify(a));switch(n.debts.forEach(function(e){e.id||(e.id=n.debts.filter(function(e){return e.id}).reduce(function(e,t){return Math.max(t.id,e)},0)+1)}),t.type){case"ToggleTheme":n.whiteTheme=!n.whiteTheme;break;case"AddReason":0===t.value.length||n.reasons.some(function(e){return e===t.value})||n.reasons.push(t.value);break;case"RemoveReason":n.reasons=n.reasons.filter(function(e){return e!==t.value});break;case"AddContact":0===t.value.length||n.contacts.some(function(e){return e===t.value})||n.contacts.push(t.value);break;case"RemoveContact":n.contacts=n.contacts.filter(function(e){return e!==t.value});break;case"AddDebt":t.value.id=n.debts.reduce(function(e,t){return Math.max(t.id,e)},0)+1,n.debts.push(t.value);break;case"PayDebt":n.debts.filter(function(e){return e.id===t.value}).forEach(function(e){e.paid=!0});break;case"UnPayDebt":n.debts.filter(function(e){return e.id===t.value}).forEach(function(e){e.paid=!1});break;case"PayAll":n.debts.filter(function(e){return e.who===t.value}).forEach(function(e){e.paid=!0});break;case"DeleteDebt":n.debts=n.debts.filter(function(e){return e.id!==t.value});break;case"EditDebt":n.debts.forEach(function(e,a){e.id===t.value.id&&(n.debts[a]=Object(J.a)({},e,t.value))})}return window.localStorage.setItem("maksavelat",JSON.stringify(n)),console.log(n,t),n},$=Object(W.b)(L),K=function(){c.a.render(o.a.createElement(E.a,{store:$},o.a.createElement(F,null)),document.getElementById("root"))};$.subscribe(K),K(),function(e){if("serviceWorker"in navigator){if(new URL("/maksavelat",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/maksavelat","/service-worker.js");G?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):H(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):H(t,e)})}}()}},[[324,2,1]]]);
//# sourceMappingURL=main.5f889c1a.chunk.js.map